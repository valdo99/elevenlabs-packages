import{useRef as n,useState as e,useEffect as t}from"react";import{Conversation as r}from"@11labs/client";export{postOverallFeedback}from"@11labs/client";function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(null,arguments)}function o(o){var c=n(null),l=n(null),i=e("disconnected"),a=i[0],s=i[1],f=e(!1),d=f[0],v=f[1],m=e("listening"),g=m[0],p=m[1];return t(function(){return function(){var n;null==(n=c.current)||n.endSession()}},[]),{startSession:function(n){try{var e,t,i=function(e){return t?e:function(e,t){try{var i=(l.current=r.startSession(u({},null!=o?o:{},null!=n?n:{},{onModeChange:function(n){p(n.mode)},onStatusChange:function(n){s(n.status)},onCanSendFeedbackChange:function(n){v(n.canSendFeedback)}})),Promise.resolve(l.current).then(function(n){return c.current=n,c.current.getId()}))}catch(n){return t(!0,n)}return i&&i.then?i.then(t.bind(null,!1),t.bind(null,!0)):t(!1,i)}(0,function(n,e){if(l.current=null,n)throw e;return e})};if(null!=(e=c.current)&&e.isOpen())return Promise.resolve(c.current.getId());var a=function(){if(l.current)return Promise.resolve(l.current).then(function(n){var e=n.getId();return t=1,e})}();return Promise.resolve(a&&a.then?a.then(i):i(a))}catch(n){return Promise.reject(n)}},endSession:function(){try{var n=c.current;return c.current=null,Promise.resolve(null==n?void 0:n.endSession()).then(function(){})}catch(n){return Promise.reject(n)}},setVolume:function(n){var e;null==(e=c.current)||e.setVolume({volume:n.volume})},getInputByteFrequencyData:function(){var n;return null==(n=c.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var n;return null==(n=c.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:function(){var n,e;return null!=(n=null==(e=c.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:function(){var n,e;return null!=(n=null==(e=c.current)?void 0:e.getOutputVolume())?n:0},sendFeedback:function(n){var e;null==(e=c.current)||e.sendFeedback(n)},status:a,canSendFeedback:d,isSpeaking:"speaking"===g}}export{o as useConversation};
//# sourceMappingURL=lib.module.js.map
